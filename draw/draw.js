/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./draw/loader.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./draw/MultiLine.ts":
/*!***************************!*\
  !*** ./draw/MultiLine.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// source: https://github.com/suytt/esri.symbol.MultiLineTextSymbol/blob/master/esri.symbol.MultiLineTextSymbol.js\nvar MultiLineLayer = /** @class */ (function () {\n    function MultiLineLayer() {\n    }\n    MultiLineLayer.setMultiLine = function () {\n        var _this = this;\n        var myBundlePromise = RAMP.GAPI.esriLoadApiClasses([\n            ['esri/layers/LabelLayer', 'LabelLayer']\n        ]);\n        myBundlePromise.then(function () {\n            if (typeof window.esri.layers.LabelLayer.prototype._addLabel === 'function') {\n                window.esri.layers.LabelLayer.prototype._addLabel2 = window.esri.layers.LabelLayer.prototype._addLabel;\n                window.esri.layers.LabelLayer.prototype._addLabel = function (a, b, c, e, g, k, m) {\n                    // replace \\n by <br>\n                    a = a.replace(/\\n/g, '<br />');\n                    _this._addLabel2(a, b, c, e, g, k, m);\n                };\n            }\n        });\n    };\n    return MultiLineLayer;\n}());\nexports.MultiLineLayer = MultiLineLayer;\nvar MultilineTextSymbol = /** @class */ (function () {\n    function MultilineTextSymbol() {\n    }\n    MultilineTextSymbol.setMultiLine = function () {\n        var myBundlePromise = RAMP.GAPI.esriLoadApiClasses([\n            ['esri/symbols/TextSymbol', 'TextSymbol'],\n            ['dojox/gfx/svg', 'svg']\n        ]);\n        myBundlePromise.then(function () {\n            if (typeof window.dojox.gfx.svg.Text.prototype.setShape === 'function') {\n                // do not use arrow function because if we do so, we loose the context of this\n                window.dojox.gfx.svg.Text.prototype.setShape = function (p) {\n                    this.shape = window.dojox.gfx.makeParameters(this.shape, p);\n                    this.bbox = null;\n                    var r = this.rawNode;\n                    var s = this.shape;\n                    r.setAttribute('x', s.x);\n                    r.setAttribute('y', s.y - 10);\n                    r.setAttribute('text-anchor', s.align);\n                    r.setAttribute('text-decoration', s.decoration);\n                    r.setAttribute('rotate', s.rotated ? 90 : 0);\n                    r.setAttribute('kerning', s.kerning ? 'auto' : 0);\n                    r.setAttribute('text-rendering', 'optimizeLegibility');\n                    while (r.firstChild) {\n                        r.removeChild(r.firstChild);\n                    }\n                    if (p.text) {\n                        var texts = p.text.replace(/<br\\s*\\/?>/ig, '\\n').split('\\n');\n                        var lineHeight = 1.1 * parseInt(document.defaultView.getComputedStyle(r, '').getPropertyValue('font-size'), 10);\n                        if (isNaN(lineHeight) || !isFinite(lineHeight)) {\n                            lineHeight = 15;\n                        }\n                        for (var i = 0, n = texts.length; i < n; i++) {\n                            var tspan = (document.createElementNS ? document.createElementNS(window.dojox.gfx.svg.xmlns.svg, 'tspan') : document.createElement('tspan'));\n                            tspan.setAttribute('dy', i ? String(lineHeight) : String(-(texts.length - 1) * lineHeight / 2));\n                            tspan.setAttribute('x', s.x);\n                            tspan.appendChild((window.dojox.gfx.useSvgWeb ? document.createTextNode(texts[i]) : document.createTextNode(texts[i])));\n                            r.appendChild(tspan);\n                        }\n                    }\n                    return this;\n                };\n            }\n        });\n    };\n    return MultilineTextSymbol;\n}());\nexports.MultilineTextSymbol = MultilineTextSymbol;\n\n\n//# sourceURL=webpack:///./draw/MultiLine.ts?");

/***/ }),

/***/ "./draw/index.ts":
/*!***********************!*\
  !*** ./draw/index.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar panel_manager_1 = __webpack_require__(/*! ./panel-manager */ \"./draw/panel-manager.ts\");\nvar Draw = /** @class */ (function () {\n    function Draw() {\n        this._style = '';\n    }\n    Draw.prototype.init = function (mapApi) {\n        this.mapApi = mapApi;\n        // get draw config\n        this.config = this._RV.getConfig('plugins').draw;\n        this.config.language = this._RV.getCurrentLang();\n        this.config.url = this._RV.getConfig('services').geometryUrl;\n        // create mapnav panel\n        this.panelManager = new panel_manager_1.PanelManager(mapApi, this.config);\n        // create side menu button to toggle toolbar\n        this.button = this.mapApi.mapI.addPluginButton(Draw.prototype.translations[this._RV.getCurrentLang()].draw.menu, this.onMenuItemClick());\n        this.button.isActive = true;\n    };\n    Draw.prototype.onMenuItemClick = function () {\n        var _this = this;\n        return function () {\n            _this.button.isActive = !_this.button.isActive;\n            document.getElementsByClassName('rv-mapnav-draw-content')[0].style.display = _this.button.isActive ? 'block' : 'none';\n        };\n    };\n    return Draw;\n}());\nexports.default = Draw;\nDraw.prototype.translations = {\n    'en-CA': {\n        draw: {\n            menu: 'Draw Toolbar',\n            picker: 'Select color',\n            point: 'Draw point',\n            line: 'Draw line',\n            polygon: 'Draw polygon',\n            measure: 'Show/Hide measures',\n            extent: 'Erase selected graphics',\n            write: 'Save to download folder',\n            read: 'Upload graphics file'\n        }\n    },\n    'fr-CA': {\n        draw: {\n            menu: 'Barre de dessin',\n            picker: 'SÃ©lectionner la couleur',\n            point: 'Dessiner point',\n            line: 'Dessiner ligne',\n            polygon: 'Dessiner polygon',\n            measure: 'Afficher/Cacher les mesures',\n            extent: 'Effacer les graphiques sÃ©lectionnÃ©s',\n            write: 'Sauvegarder dans le rÃ©pertoire tÃ©lÃ©chargement',\n            read: 'Charger le fichier de graphiques'\n        }\n    }\n};\nwindow.draw = Draw;\n\n\n//# sourceURL=webpack:///./draw/index.ts?");

/***/ }),

/***/ "./draw/loader.js":
/*!************************!*\
  !*** ./draw/loader.js ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.ts */ \"./draw/index.ts\");\n/* harmony import */ var _index_ts__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_index_ts__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _main_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main.scss */ \"./draw/main.scss\");\n/* harmony import */ var _main_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_main_scss__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n//# sourceURL=webpack:///./draw/loader.js?");

/***/ }),

/***/ "./draw/main.scss":
/*!************************!*\
  !*** ./draw/main.scss ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./draw/main.scss?");

/***/ }),

/***/ "./draw/panel-manager.ts":
/*!*******************************!*\
  !*** ./draw/panel-manager.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar templates_1 = __webpack_require__(/*! ./templates */ \"./draw/templates.ts\");\nvar toolbar_1 = __webpack_require__(/*! ./toolbar */ \"./draw/toolbar.ts\");\nvar vanilla_picker_1 = __webpack_require__(/*! vanilla-picker */ \"./node_modules/vanilla-picker/dist/vanilla-picker.mjs\");\nvar FileSaver = __webpack_require__(/*! file-saver */ \"./node_modules/file-saver/dist/FileSaver.min.js\");\nvar Debounce = __webpack_require__(/*! debounce */ \"./node_modules/debounce/index.js\");\nvar PanelManager = /** @class */ (function () {\n    function PanelManager(mapApi, config) {\n        this.mapApi = mapApi;\n        // create ui then instanciate the ESRI toolbar\n        this.drawToolbar = new toolbar_1.DrawToolbar(mapApi, config);\n        this.makeControls();\n    }\n    PanelManager.prototype.makeControls = function () {\n        var _this = this;\n        this.angularControls();\n        // add draw controls\n        $('rv-mapnav').append(this.compileTemplate(templates_1.MAPNAV_DRAW_TOOLBAR_TEMPLATE));\n        // add colour picker\n        // use timeout because if not, the value to create id is not finish compiled yet.\n        setTimeout(function () {\n            var pick = new vanilla_picker_1.default({\n                parent: $('#drawiconpicker').closest('.md-icon-button')[0],\n                color: 'red',\n                popup: 'left'\n            });\n            $('#pathpicker')[0].style.color = 'red';\n            // update the color selector and toolbar\n            var that = _this;\n            pick.onChange = function (color) {\n                that.drawToolbar.activeColor = color.rgba;\n                // get color, set opacity to 1 even if different so it is visible on the toolbar\n                var colorNew = color.rgbaString.substring(0, color.rgbaString.lastIndexOf(',')) + \",1)\";\n                $('#pathpicker')[0].style.color = colorNew;\n            };\n        }, 0);\n    };\n    PanelManager.prototype.angularControls = function () {\n        var that = this;\n        this.mapApi.agControllerRegister('DrawToolbarCtrl', function () {\n            var _this = this;\n            this.controls = {\n                picker: {\n                    name: 'picker',\n                    label: 'plugins.draw.draw.picker',\n                    icon: 'M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z',\n                    tooltip: 'plugins.draw.draw.picker',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.picker); }\n                },\n                point: {\n                    name: 'point',\n                    label: 'plugins.draw.draw.point',\n                    icon: 'M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z',\n                    tooltip: 'plugins.draw.draw.point',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.point); },\n                    selected: function () { return _this.controls.point.active; },\n                    action: function () {\n                        that.setActive(_this.controls, 'point');\n                    }\n                },\n                polyline: {\n                    name: 'polyline',\n                    label: 'plugins.draw.draw.line',\n                    icon: 'M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z',\n                    tooltip: 'plugins.draw.draw.line',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.polyline); },\n                    selected: function () { return _this.controls.polyline.active; },\n                    action: function () {\n                        that.setActive(_this.controls, 'polyline');\n                    }\n                },\n                polygon: {\n                    name: 'polygon',\n                    label: 'plugins.draw.draw.polygon',\n                    icon: 'M2 22h20V2z',\n                    tooltip: 'plugins.draw.draw.polygon',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.polygon); },\n                    selected: function () { return _this.controls.polygon.active; },\n                    action: function () {\n                        that.setActive(_this.controls, 'polygon');\n                    }\n                },\n                measure: {\n                    name: 'measure',\n                    label: 'plugins.draw.draw.measure',\n                    iconShow: 'M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z',\n                    iconHide: 'M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z',\n                    tooltip: 'plugins.draw.draw.measure',\n                    active: true,\n                    createIcon: function () { that.createIcon(_this.controls.measure, 'iconShow'); },\n                    action: function () {\n                        that.measure(_this.controls.measure, that);\n                    }\n                },\n                extent: {\n                    name: 'extent',\n                    label: 'plugins.draw.draw.extent',\n                    icon: 'M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z',\n                    tooltip: 'plugins.draw.draw.extent',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.extent); },\n                    selected: function () { return _this.controls.extent.active; },\n                    action: function () {\n                        that.setActive(_this.controls, 'extent');\n                    }\n                },\n                write: {\n                    name: 'write',\n                    label: 'plugins.draw.draw.write',\n                    icon: 'M19 9h-4V3H9v6H5l7 7 7-7z M5 18v2h14v-2H5z',\n                    tooltip: 'plugins.draw.draw.write',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.write); },\n                    action: function () {\n                        that.setActive(_this.controls, 'write');\n                        // save the file. Some browsers like IE and Edge doesn't support File constructor, use blob\n                        // https://stackoverflow.com/questions/39266801/saving-file-on-ie11-with-filesaver\n                        var file = new Blob([that.drawToolbar.exportGraphics()], { type: 'application/json' });\n                        FileSaver.saveAs(file, \"viewer.fgpv\");\n                    }\n                },\n                read: {\n                    name: 'read',\n                    label: 'plugins.draw.draw.read',\n                    icon: 'M9 16h6v-6h4l-7-7-7 7h4z M5 18v2h14v-2H5z',\n                    tooltip: 'plugins.draw.draw.read',\n                    active: false,\n                    createIcon: function () { that.createIcon(_this.controls.read); },\n                    action: function () {\n                        that.setActive(_this.controls, 'read');\n                        $(document.getElementById('rvUploadGraphics'))[0].click();\n                        $('#rvUploadGraphics').change(function (event) {\n                            $('#rvUploadGraphics').off('change');\n                            var reader = new FileReader();\n                            reader.addEventListener('load', function (event) {\n                                that.drawToolbar.importGraphics(JSON.parse(event.target.result));\n                            });\n                            reader.readAsText(event.target.files[0]);\n                            $('#rvUploadGraphics').val('');\n                        });\n                    }\n                }\n            };\n            // trap esc key when using tools\n            that.mapApi.mapDiv.on('keydown', { controls: this.controls, draw: that.drawToolbar }, function (event) {\n                var tool = event.data.draw.activeTool;\n                if (window.event.which === 27 && tool !== '') { // esc\n                    // set focus on the active tool, remove the selection class and deactivate the tool\n                    var element = document.getElementsByClassName(\"rv-draw-\" + tool + \"-button\")[0];\n                    element.rvFocus();\n                    element.classList.remove('rv-control-active');\n                    // this will set the tool inactive\n                    that.setActive(event.data.controls, tool);\n                }\n            });\n        });\n    };\n    PanelManager.prototype.createIcon = function (control, icon) {\n        // use timeout because if not, the value to create id is not finish compiled yet.\n        var btnIcon = typeof icon !== 'undefined' ? control[icon] : control.icon;\n        setTimeout(function () { document.getElementById(\"path\" + control.name).setAttribute('d', btnIcon); }, 0);\n    };\n    PanelManager.prototype.setActive = function (controls, name) {\n        // set all controls to false then enable/disable the needed one\n        var enable = !controls[name].active;\n        Object.keys(controls).forEach(function (k) { return controls[k].active = false; });\n        controls[name].active = enable;\n        this.mapApi.mapDiv.off('keydown', '.rv-esri-map', this.keyDownHandler);\n        if (typeof this._mousemoveHandler !== 'undefined') {\n            this._mousemoveHandler.remove();\n        }\n        ;\n        if (typeof this._mouseclickHandler !== 'undefined') {\n            this._mouseclickHandler.remove();\n        }\n        ;\n        this.drawToolbar.mapPoints = [];\n        // activate the keyboard event if an active tool is selected\n        // if needed we can look for rv-keyboard on mapDiv to know if crosshair is enable\n        if (enable) {\n            // set focus on the map and add the keydown event\n            document.getElementsByClassName('rv-esri-map')[0].rvFocus();\n            var jQwindow = $(window);\n            this.mapApi.mapDiv.on('keydown', '.rv-esri-map', { draw: this.drawToolbar, jQwindow: jQwindow, name: name }, this.keyDownHandler);\n            if (name === 'polyline') {\n                var that_1 = this;\n                this._mousemoveHandler = this.mapApi.esriMap.on('mouse-move', Debounce(function (event) { that_1.mouseHandler(event, that_1.drawToolbar); }, 50));\n                this._mouseclickHandler = this.mapApi.esriMap.on('click', function (event) { that_1.mouseHandler(event, that_1.drawToolbar); });\n            }\n        }\n        // activate the right tool from the ESRI draw toolbar\n        this.drawToolbar.activeTool = enable ? controls[name].name : '';\n    };\n    PanelManager.prototype.keyDownHandler = function (event) {\n        var _a;\n        // get the crosshairs dimensions if not yet defined\n        var targetElement = $('.rv-target')[0];\n        var targetElmWidth;\n        var targetElmHeight;\n        _a = [targetElement.offsetWidth, targetElement.offsetHeight], targetElmWidth = _a[0], targetElmHeight = _a[1];\n        // get position of the crosshairs center point relative to the visible viewport\n        var _b = $(targetElement).offset(), x = _b.left, y = _b.top;\n        x += -event.data.jQwindow.scrollLeft() + targetElmWidth / 2;\n        y += -event.data.jQwindow.scrollTop() + targetElmHeight / 2;\n        if (event.which === 13 && event.data.name === 'extent') { // enter extent starting point\n            event.data.draw.setExtentPoints([x, y], false);\n            event.data.draw.geometryLength = event.data.draw.geometryLength + 1;\n        }\n        else if (event.which === 32 && event.data.name === 'extent' && event.data.draw.geometryLength > 0) { // enter extent stopping point\n            event.data.draw.setExtentPoints([x, y], true);\n        }\n        else if (event.which === 13 ||\n            (event.which === 32 && event.data.name === 'polyline' && event.data.draw.geometryLength > 1) ||\n            (event.which === 32 && event.data.name === 'polygon' && event.data.draw.geometryLength > 2)) { // handle add geometry\n            var mouse = (event.which === 13) ? 'click' : 'dbl-click';\n            event.data.draw.simulateClick([x, y], mouse);\n            // keep track of number of point inside the geometry\n            event.data.draw.geometryLength = (mouse === 'click') ? event.data.draw.geometryLength + 1 : 0;\n        }\n    };\n    PanelManager.prototype.mouseHandler = function (event, drawToolbar) {\n        if (event.type === 'mousemove' && typeof drawToolbar.mapPoints[0] !== 'undefined') {\n            drawToolbar.mapPoints = [drawToolbar.mapPoints[0], event.mapPoint];\n        }\n        else if (event.type === 'click') {\n            drawToolbar.mapPoints = [event.mapPoint];\n        }\n    };\n    PanelManager.prototype.measure = function (measure, that) {\n        measure.active = !measure.active;\n        var icon = measure.active ? 'iconHide' : 'iconShow';\n        that.createIcon(measure, icon);\n        if (icon === 'iconHide') {\n            $('#graphicsRvColl_layer text').addClass('rv-draw-text-hide');\n            $('#graphicsRvColl_layer rect').addClass('rv-draw-text-hide');\n        }\n        else {\n            $('#graphicsRvColl_layer text').removeClass('rv-draw-text-hide');\n            $('#graphicsRvColl_layer rect').removeClass('rv-draw-text-hide');\n            that.drawToolbar.createBackground();\n        }\n    };\n    PanelManager.prototype.compileTemplate = function (template) {\n        var temp = $(template);\n        this.mapApi.$compile(temp);\n        return temp;\n    };\n    return PanelManager;\n}());\nexports.PanelManager = PanelManager;\n\n\n//# sourceURL=webpack:///./draw/panel-manager.ts?");

/***/ }),

/***/ "./draw/templates.ts":
/*!***************************!*\
  !*** ./draw/templates.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// panels templates: draw\nexports.MAPNAV_DRAW_TOOLBAR_TEMPLATE = \"\\n<span class=\\\"rv-spacer\\\"></span>\\n<div class=\\\"rv-mapnav-content rv-mapnav-draw-content\\\">\\n    <div class=\\\"rv-button-group hover rv-whiteframe-z2\\\" ng-controller=\\\"DrawToolbarCtrl as ctrl\\\">\\n        <md-button ng-repeat-start=\\\"control in ctrl.controls\\\" name=\\\"{{ controls }}\\\"\\n            aria-label=\\\"{{ control.label | translate }}\\\"\\n            class=\\\"md-icon-button rv-button-32 rv-icon-16 rv-draw-button rv-draw-{{ control.name }}-button\\\"\\n            ng-class=\\\"{ 'rv-control-active': control.selected() }\\\"\\n            ng-click=\\\"control.action($event)\\\">\\n\\n            <md-tooltip md-direction=\\\"left\\\">{{ control.tooltip | translate }}</md-tooltip>\\n            <md-icon>\\n                <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fit=\\\"\\\" height=\\\"100%\\\" width=\\\"100%\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" viewBox=\\\"0 0 24 24\\\" focusable=\\\"false\\\">\\n                <g id=\\\"drawicon{{control.name}}\\\" ng-init=\\\"control.createIcon()\\\"><path id=\\\"path{{control.name}}\\\" d=\\\"\\\"></path></g></svg>\\n            </md-icon>\\n        </md-button>\\n        <!-- this will insert divider after every element except the last one -->\\n        <md-divider ng-if=\\\"!$last\\\" ng-repeat-end></md-divider>\\n        <input id=\\\"rvUploadGraphics\\\" class=\\\"ng-hide\\\" type=\\\"file\\\" accept=\\\".fgpv\\\"></input>\\n    </div>\\n</div>\\n<span class=\\\"rv-spacer\\\"></span>\\n\";\n\n\n//# sourceURL=webpack:///./draw/templates.ts?");

/***/ }),

/***/ "./draw/toolbar.ts":
/*!*************************!*\
  !*** ./draw/toolbar.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MultiLine_1 = __webpack_require__(/*! ./MultiLine */ \"./draw/MultiLine.ts\");\n/**\n * Creates and manages draw toolbar.\n */\nvar DrawToolbar = /** @class */ (function () {\n    function DrawToolbar(mapApi, config) {\n        var _this = this;\n        this._activeTool = '';\n        this._activeColor = [255, 0, 0, 1];\n        this._mapPoint = [];\n        this._geomLength = 0;\n        this._extentPoints = [];\n        this._mapApi = mapApi;\n        this._config = config;\n        this._identifyMode = this._mapApi.layersObj._identifyMode;\n        // add needed dependencies\n        var myBundlePromise = RAMP.GAPI.esriLoadApiClasses([\n            ['esri/toolbars/draw', 'esriTool'],\n            ['esri/graphic', 'Graphic'],\n            ['esri/symbols/TextSymbol', 'TextSymbol'],\n            ['esri/symbols/SimpleMarkerSymbol', 'SimpleMarkerSymbol'],\n            ['esri/symbols/SimpleLineSymbol', 'SimpleLineSymbol'],\n            ['esri/symbols/SimpleFillSymbol', 'SimpleFillSymbol'],\n            ['esri/geometry/ScreenPoint', 'ScreenPoint'],\n            ['dojo/i18n!esri/nls/jsapi', 'i18n'],\n            ['esri/tasks/GeometryService', 'GeomService'],\n            ['esri/tasks/DensifyParameters', 'DensifyParams'],\n            ['esri/tasks/DistanceParameters', 'DistanceParams'],\n            ['esri/tasks/LengthsParameters', 'LengthParams'],\n            ['esri/tasks/AreasAndLengthsParameters', 'AreaParams'],\n            ['esri/geometry/Point', 'Point'],\n            ['esri/geometry/Polygon', 'Polygon']\n        ]);\n        var that = this;\n        myBundlePromise.then(function (myBundle) {\n            _this.initToolbar(myBundle, _this._config);\n            var defaults = {\n                'en-CA': {\n                    addPoint: 'Click to add a point',\n                    complete: 'Double-click to finish',\n                    finish: 'Double-click to finish',\n                    freehand: 'Press down to start and let go to finish',\n                    resume: 'Click to continue drawing',\n                    start: 'Click to start drawing'\n                },\n                'fr-CA': {\n                    addPoint: 'Cliquez pour ajouter un point',\n                    complete: 'Double-cliquez pour finir',\n                    finish: 'Double-cliquez pour finir',\n                    freehand: 'Appuyez pour commencer et laissez aller pour finir',\n                    resume: 'Cliquez pour continuer Ã  dessiner',\n                    start: 'Cliquez pour commencer Ã  dessiner'\n                }\n            };\n            myBundle.i18n.toolbars.draw = defaults[that._config.language];\n        });\n        // create graphics layer\n        this._mapApi.layersObj.addLayer('graphicsRvColl');\n        // create geometry service and set event for measures\n        this._geometryService = RAMP.GAPI.esriBundle.GeometryService(config.url);\n        this._geometryService.on('distance-complete', function (evt) { _this.outputDistance(evt); });\n        this._geometryService.on('areas-and-lengths-complete', function (evt) { _this.outputAreaAndLength(evt, _this._activeGraphic); });\n        this._geometryService.on('lengths-complete', function (evt) { _this.outputLength(evt, _this._activeGraphic); });\n        this._geometryService.on('label-points-complete', function (evt) { _this.labelPoint(evt, _this._activeGraphic); });\n        MultiLine_1.MultiLineLayer.setMultiLine();\n        MultiLine_1.MultilineTextSymbol.setMultiLine();\n        return this;\n    }\n    DrawToolbar.prototype.initToolbar = function (myBundle, config) {\n        var _this = this;\n        this._bundle = myBundle;\n        this._toolbar = new this._bundle.esriTool(this._mapApi.esriMap);\n        // set symbols\n        this._symbols = {\n            point: new this._bundle.SimpleMarkerSymbol(),\n            line: new this._bundle.SimpleLineSymbol(),\n            polygon: new this._bundle.SimpleFillSymbol()\n        };\n        // set measurement parameters\n        this._distanceParams = new this._bundle.DistanceParams();\n        this._distanceParams.distanceUnit = this._bundle.GeomService.UNIT_KILOMETER;\n        this._distanceParams.geodesic = true;\n        this._lengthParams = new this._bundle.LengthParams();\n        this._lengthParams.lengthUnit = this._bundle.GeomService.UNIT_KILOMETER;\n        this._lengthParams.geodesic = true;\n        this._areaParams = new this._bundle.AreaParams();\n        this._areaParams.lengthUnit = this._bundle.GeomService.UNIT_KILOMETER;\n        this._areaParams.areaUnit = this._bundle.GeomService.UNIT_SQUARE_KILOMETERS;\n        this._areaParams.calculationType = 'preserveShape';\n        // define on draw complete event\n        var that = this;\n        this._toolbar.on('draw-complete', function (evt) { _this.addToMap(evt, _this._symbols); });\n        this._mapApi.esriMap.on('pan-end', function () { setTimeout(function () { return _this.createBackground(); }, 0); });\n        this._mapApi.esriMap.on('zoom-end', function () { setTimeout(function () { return _this.createBackground(); }, 0); });\n    };\n    Object.defineProperty(DrawToolbar.prototype, \"activeTool\", {\n        get: function () {\n            return this._activeTool;\n        },\n        set: function (value) {\n            if (value === '') {\n                this._toolbar.deactivate();\n                this.disableDetails(false);\n            }\n            else {\n                this._toolbar.activate(this._bundle.esriTool[value.toUpperCase()]);\n                this.disableDetails(true);\n            }\n            this._activeTool = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DrawToolbar.prototype, \"activeColor\", {\n        get: function () {\n            return this._activeColor;\n        },\n        set: function (value) {\n            this._activeColor = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DrawToolbar.prototype, \"geometryLength\", {\n        get: function () {\n            return this._geomLength;\n        },\n        set: function (value) {\n            this._geomLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DrawToolbar.prototype, \"mapPoints\", {\n        get: function () {\n            return this._mapPoint;\n        },\n        set: function (value) {\n            this._mapPoint = value;\n            if (value.length === 2) {\n                // get length measure\n                this._distanceParams.geometry1 = value[0];\n                this._distanceParams.geometry2 = value[1];\n                this._geometryService.distance(this._distanceParams);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DrawToolbar.prototype, \"graphicKey\", {\n        get: function () {\n            return this._graphicKey;\n        },\n        set: function (value) {\n            this._graphicKey = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DrawToolbar.prototype, \"graphicsLayer\", {\n        get: function () {\n            return this._mapApi.esriMap._layers.graphicsRvColl;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DrawToolbar.prototype.importGraphics = function (graphics) {\n        for (var _i = 0, graphics_1 = graphics; _i < graphics_1.length; _i++) {\n            var item = graphics_1[_i];\n            var graphic = new this._bundle.Graphic(item);\n            // color doesn't always transfert properly, overwrite it\n            graphic.symbol.color = item.symbol.color;\n            if (typeof graphic.symbol.outline !== 'undefined') {\n                graphic.symbol.outline.color = item.symbol.outline.color;\n            }\n            // add the key for measure then add to layer\n            graphic.key = item.key;\n            this.graphicsLayer.add(graphic);\n        }\n        this.createBackground();\n    };\n    DrawToolbar.prototype.exportGraphics = function () {\n        var graphics = this.graphicsLayer.graphics;\n        var output = [];\n        for (var _i = 0, graphics_2 = graphics; _i < graphics_2.length; _i++) {\n            var graphic = graphics_2[_i];\n            // do not keep text background, it will regenerated\n            if (typeof graphic.geometry !== 'undefined') {\n                // keep the key to link to measure\n                var json = graphic.toJson();\n                json.key = graphic.key;\n                // color doesn't always transfert properly, overwrite it\n                json.symbol.color = graphic.symbol.color;\n                if (typeof json.symbol.outline !== 'undefined') {\n                    json.symbol.outline.color = [\n                        graphic.symbol.outline.color.r,\n                        graphic.symbol.outline.color.g,\n                        graphic.symbol.outline.color.b,\n                        graphic.symbol.outline.color.a\n                    ];\n                }\n                output.push(json);\n            }\n        }\n        return JSON.stringify(output);\n    };\n    // disable/enable details panel\n    DrawToolbar.prototype.disableDetails = function (value) {\n        this._mapApi.layersObj._identifyMode = value ? [] : this._identifyMode;\n    };\n    DrawToolbar.prototype.simulateClick = function (pt, mouse) {\n        var mapPoint = this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({ x: pt[0], y: pt[1] }));\n        this._mapApi.esriMap.emit(mouse, { mapPoint: new this._bundle.Point(mapPoint.x, mapPoint.y, this._mapApi.esriMap.spatialReference) });\n    };\n    DrawToolbar.prototype.setExtentPoints = function (value, final) {\n        if (final && this._extentPoints.length === 1) {\n            var pt = this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({ x: value[0], y: value[1] }));\n            var geometry = {\n                xmin: this._extentPoints[0].x,\n                ymin: this._extentPoints[0].y,\n                xmax: pt.x,\n                ymax: pt.y\n            };\n            this.deleteGraphics(geometry);\n            this._extentPoints = [];\n        }\n        else {\n            this._extentPoints[0] = this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({ x: value[0], y: value[1] }));\n        }\n    };\n    DrawToolbar.prototype.addToMap = function (evt, symbols) {\n        switch (evt.geometry.type) {\n            case 'point':\n                this.addGraphic(evt.geometry, symbols.point);\n                break;\n            case 'polyline':\n                // get length measure\n                this._activeGraphic = evt.geometry;\n                this._lengthParams.polylines = [evt.geometry];\n                this._geometryService.lengths(this._lengthParams);\n                this.addGraphic(evt.geometry, symbols.line);\n                break;\n            case 'polygon':\n                // get length and area measure\n                this._activeGraphic = evt.geometry;\n                this._areaParams.polygons = [evt.geometry];\n                this._geometryService.areasAndLengths(this._areaParams);\n                this.addGraphic(evt.geometry, symbols.polygon);\n                break;\n            case 'extent':\n                this.deleteGraphics(evt.geometry);\n                break;\n        }\n    };\n    DrawToolbar.prototype.addGraphic = function (geometry, symbol) {\n        symbol.color = this.activeColor;\n        this.graphicKey = Math.random().toString(36).substr(2, 9);\n        var graphic = new this._bundle.Graphic(geometry, symbol);\n        graphic.key = this.graphicKey;\n        this.graphicsLayer.add(graphic);\n        // reset number of points for the geometry (use for wcag drawing)\n        // reset mapPoints  array to remove theoric line length calculation\n        this.geometryLength = 0;\n        this.mapPoints = [];\n    };\n    DrawToolbar.prototype.deleteGraphics = function (geometry) {\n        // create a polygon from the extent\n        var poly = new this._bundle.Polygon({\n            'rings': [[[geometry.xmin, geometry.ymin], [geometry.xmin, geometry.ymax], [geometry.xmax, geometry.ymax], [geometry.xmax, geometry.ymin], [geometry.xmin, geometry.ymin]]],\n            'spatialReference': this._mapApi.fgpMapObj.spatialReference\n        });\n        this.geometryLength = 0;\n        this.densifyGeom(poly);\n    };\n    DrawToolbar.prototype.outputDistance = function (evt) {\n        // remove temp graphic\n        // use this kind of loop because graphics array is dynamic\n        var graphics = this.graphicsLayer.graphics;\n        for (var i = 0; i < graphics.length; i++) {\n            var graphic_1 = graphics[i];\n            if (graphic_1.key === 'tmp') {\n                this.graphicsLayer.remove(graphic_1);\n                i--;\n            }\n        }\n        // add the new distance\n        var graphic = new this._bundle.Graphic(this.mapPoints[1], new this._bundle.TextSymbol(evt.distance.toFixed(2) + \" km\"));\n        graphic.key = 'tmp';\n        this.graphicsLayer.add(graphic);\n        this.createBackground();\n    };\n    DrawToolbar.prototype.outputAreaAndLength = function (evt, graphic) {\n        graphic.area = evt.result.areas[0].toFixed(2);\n        graphic.length = evt.result.lengths[0].toFixed(2);\n        this._geometryService.labelPoints([graphic]);\n    };\n    DrawToolbar.prototype.outputLength = function (evt, graphic) {\n        var pt = graphic.paths[0][graphic.paths[0].length - 1];\n        var point = new this._bundle.Point(pt[0], pt[1], this._mapApi.esriMap.spatialReference);\n        var newGraphic = new this._bundle.Graphic(point, new this._bundle.TextSymbol(evt.result.lengths[0].toFixed(2) + \" km\"));\n        newGraphic.key = this.graphicKey;\n        this.graphicsLayer.add(newGraphic);\n        this.createBackground();\n    };\n    DrawToolbar.prototype.labelPoint = function (evt, graphic) {\n        var newGraphic = new this._bundle.Graphic(evt.geometries[0], new this._bundle.TextSymbol(graphic.length + \" km\\n\" + graphic.area + \" km\\u00B2\"));\n        newGraphic.key = this.graphicKey;\n        this.graphicsLayer.add(newGraphic);\n        this.createBackground();\n    };\n    DrawToolbar.prototype.createBackground = function () {\n        // delete background\n        $('#graphicsRvColl_layer rect').remove();\n        // get text element and loop them to create background\n        var graphics = $('#graphicsRvColl_layer text').not('.rv-draw-text-hide');\n        for (var _i = 0, _a = graphics.toArray(); _i < _a.length; _i++) {\n            var graphic = _a[_i];\n            var lBox = graphic.getBBox();\n            var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            rect.setAttribute('x', String(lBox.x - 2));\n            rect.setAttribute('y', String(lBox.y + 1));\n            rect.setAttribute('width', String(lBox.width + 4));\n            rect.setAttribute('height', String(lBox.height - 2));\n            rect.setAttribute('fill', 'rgba(255,255,255,0.9)');\n            $(rect).insertBefore(graphic);\n        }\n    };\n    DrawToolbar.prototype.densifyGeom = function (geom) {\n        var _this = this;\n        var params = new this._bundle.DensifyParams();\n        params.geodesic = true;\n        params.geometries = [geom];\n        params.lengthUnit = this._geometryService.UNIT_KILOMETER;\n        this._geometryService.densify(params, function (geoms) {\n            var graphics = _this.graphicsLayer.graphics;\n            var key = ['tmp'];\n            for (var _i = 0, graphics_3 = graphics; _i < graphics_3.length; _i++) {\n                var graphic = graphics_3[_i];\n                if (geoms[0].getExtent().intersects(graphic.geometry)) {\n                    key.push(graphic.key);\n                }\n            }\n            // use this kind of loop because graphics array is dynamic\n            for (var i = 0; i < graphics.length; i++) {\n                var graphic = graphics[i];\n                if (key.indexOf(graphic.key) !== -1) {\n                    _this.graphicsLayer.remove(graphic);\n                    i--;\n                }\n            }\n            _this.createBackground();\n        });\n    };\n    ;\n    return DrawToolbar;\n}());\nexports.DrawToolbar = DrawToolbar;\n\n\n//# sourceURL=webpack:///./draw/toolbar.ts?");

/***/ }),

/***/ "./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n\n\n//# sourceURL=webpack:///./node_modules/debounce/index.js?");

/***/ }),

/***/ "./node_modules/file-saver/dist/FileSaver.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/file-saver/dist/FileSaver.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(a,b){if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (b),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Depricated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;return b.open(\"HEAD\",a,!1),b.send(),200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}};f.saveAs=a.saveAs=a, true&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/file-saver/dist/FileSaver.min.js?");

/***/ }),

/***/ "./node_modules/vanilla-picker/dist/vanilla-picker.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/vanilla-picker/dist/vanilla-picker.mjs ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nString.prototype.startsWith = String.prototype.startsWith || function (needle) {\n    return this.indexOf(needle) === 0;\n};\nString.prototype.padStart = String.prototype.padStart || function (len, pad) {\n    var str = this;while (str.length < len) {\n        str = pad + str;\n    }return str;\n};\n\nvar colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\n\nfunction printNum(num) {\n    var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\n    return str || '0';\n}\n\nvar Color = function () {\n    function Color(r, g, b, a) {\n        classCallCheck(this, Color);\n\n\n        var that = this;\n        function parseString(input) {\n\n            if (input.startsWith('hsl')) {\n                var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map2 = slicedToArray(_input$match$map, 4),\n                    h = _input$match$map2[0],\n                    s = _input$match$map2[1],\n                    l = _input$match$map2[2],\n                    _a = _input$match$map2[3];\n\n                if (_a === undefined) {\n                    _a = 1;\n                }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, _a];\n            } else if (input.startsWith('rgb')) {\n                var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map4 = slicedToArray(_input$match$map3, 4),\n                    _r = _input$match$map4[0],\n                    _g = _input$match$map4[1],\n                    _b = _input$match$map4[2],\n                    _a2 = _input$match$map4[3];\n\n                if (_a2 === undefined) {\n                    _a2 = 1;\n                }\n\n                that.rgba = [_r, _g, _b, _a2];\n            } else {\n                if (input.startsWith('#')) {\n                    that.rgba = Color.hexToRgb(input);\n                } else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n        if (r === undefined) ; else if (Array.isArray(r)) {\n            this.rgba = r;\n        } else if (b === undefined) {\n            var color = r && '' + r;\n            if (color) {\n                parseString(color.toLowerCase());\n            }\n        } else {\n            this.rgba = [r, g, b, a === undefined ? 1 : a];\n        }\n    }\n\n    createClass(Color, [{\n        key: 'printRGB',\n        value: function printRGB(alpha) {\n            var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n                vals = rgb.map(function (x, i) {\n                return printNum(x, i === 3 ? 3 : 0);\n            });\n\n            return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\n        }\n    }, {\n        key: 'printHSL',\n        value: function printHSL(alpha) {\n            var mults = [360, 100, 100, 1],\n                suff = ['', '%', '%', ''];\n\n            var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n                vals = hsl.map(function (x, i) {\n                return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\n            });\n\n            return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\n        }\n    }, {\n        key: 'printHex',\n        value: function printHex(alpha) {\n            var hex = this.hex;\n            return alpha ? hex : hex.substring(0, 7);\n        }\n    }, {\n        key: 'rgba',\n        get: function get$$1() {\n            if (this._rgba) {\n                return this._rgba;\n            }\n            if (!this._hsla) {\n                throw new Error('No color is set');\n            }\n\n            return this._rgba = Color.hslToRgb(this._hsla);\n        },\n        set: function set$$1(rgb) {\n            if (rgb.length === 3) {\n                rgb[3] = 1;\n            }\n\n            this._rgba = rgb;\n            this._hsla = null;\n        }\n    }, {\n        key: 'rgbString',\n        get: function get$$1() {\n            return this.printRGB();\n        }\n    }, {\n        key: 'rgbaString',\n        get: function get$$1() {\n            return this.printRGB(true);\n        }\n    }, {\n        key: 'hsla',\n        get: function get$$1() {\n            if (this._hsla) {\n                return this._hsla;\n            }\n            if (!this._rgba) {\n                throw new Error('No color is set');\n            }\n\n            return this._hsla = Color.rgbToHsl(this._rgba);\n        },\n        set: function set$$1(hsl) {\n            if (hsl.length === 3) {\n                hsl[3] = 1;\n            }\n\n            this._hsla = hsl;\n            this._rgba = null;\n        }\n    }, {\n        key: 'hslString',\n        get: function get$$1() {\n            return this.printHSL();\n        }\n    }, {\n        key: 'hslaString',\n        get: function get$$1() {\n            return this.printHSL(true);\n        }\n    }, {\n        key: 'hex',\n        get: function get$$1() {\n            var rgb = this.rgba,\n                hex = rgb.map(function (x, i) {\n                return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\n            });\n\n            return '#' + hex.map(function (x) {\n                return x.padStart(2, '0');\n            }).join('');\n        },\n        set: function set$$1(hex) {\n            this.rgba = Color.hexToRgb(hex);\n        }\n    }], [{\n        key: 'hexToRgb',\n        value: function hexToRgb(input) {\n\n            var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F').replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4').replace(/^(\\w{6})$/, '$1FF');\n\n            if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\n                throw new Error('Unknown hex color; ' + input);\n            }\n\n            var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1).map(function (x) {\n                return parseInt(x, 16);\n            });\n\n            rgba[3] = rgba[3] / 255;\n            return rgba;\n        }\n    }, {\n        key: 'nameToRgb',\n        value: function nameToRgb(input) {\n\n            var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\n                hex = colorNames[hash];\n            return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n        }\n    }, {\n        key: 'rgbToHsl',\n        value: function rgbToHsl(_ref) {\n            var _ref2 = slicedToArray(_ref, 4),\n                r = _ref2[0],\n                g = _ref2[1],\n                b = _ref2[2],\n                a = _ref2[3];\n\n            r /= 255;\n            g /= 255;\n            b /= 255;\n\n            var max = Math.max(r, g, b),\n                min = Math.min(r, g, b);\n            var h = void 0,\n                s = void 0,\n                l = (max + min) / 2;\n\n            if (max === min) {\n                h = s = 0;\n            } else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);break;\n                    case g:\n                        h = (b - r) / d + 2;break;\n                    case b:\n                        h = (r - g) / d + 4;break;\n                }\n\n                h /= 6;\n            }\n\n            return [h, s, l, a];\n        }\n    }, {\n        key: 'hslToRgb',\n        value: function hslToRgb(_ref3) {\n            var _ref4 = slicedToArray(_ref3, 4),\n                h = _ref4[0],\n                s = _ref4[1],\n                l = _ref4[2],\n                a = _ref4[3];\n\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n\n            if (s === 0) {\n                r = g = b = l;\n            } else {\n                var hue2rgb = function hue2rgb(p, q, t) {\n                    if (t < 0) t += 1;\n                    if (t > 1) t -= 1;\n                    if (t < 1 / 6) return p + (q - p) * 6 * t;\n                    if (t < 1 / 2) return q;\n                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                };\n\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n                    p = 2 * l - q;\n\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n\n            var rgba = [r * 255, g * 255, b * 255].map(Math.round);\n            rgba[3] = a;\n\n            return rgba;\n        }\n    }]);\n    return Color;\n}();\n\nvar EventBucket = function () {\n    function EventBucket() {\n        classCallCheck(this, EventBucket);\n\n        this._events = [];\n    }\n\n    createClass(EventBucket, [{\n        key: 'add',\n        value: function add(target, type, handler) {\n            target.addEventListener(type, handler, false);\n            this._events.push({\n                target: target,\n                type: type,\n                handler: handler\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove(target, type, handler) {\n            this._events = this._events.filter(function (e) {\n                var isMatch = true;\n                if (target && target !== e.target) {\n                    isMatch = false;\n                }\n                if (type && type !== e.type) {\n                    isMatch = false;\n                }\n                if (handler && handler !== e.handler) {\n                    isMatch = false;\n                }\n\n                if (isMatch) {\n                    EventBucket._doRemove(e.target, e.type, e.handler);\n                }\n                return !isMatch;\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.forEach(function (e) {\n                return EventBucket._doRemove(e.target, e.type, e.handler);\n            });\n            this._events = [];\n        }\n    }], [{\n        key: '_doRemove',\n        value: function _doRemove(target, type, handler) {\n            target.removeEventListener(type, handler, false);\n        }\n    }]);\n    return EventBucket;\n}();\n\nfunction parseHTML(htmlString) {\n\n    var div = document.createElement('div');\n    div.innerHTML = htmlString;\n    return div.firstElementChild;\n}\n\nfunction dragTrack(eventBucket, area, callback) {\n    var dragging = false;\n\n    function clamp(val, min, max) {\n        return Math.max(min, Math.min(val, max));\n    }\n\n    function onMove(e, info, starting) {\n        if (starting) {\n            dragging = true;\n        }\n        if (!dragging) {\n            return;\n        }\n\n        e.preventDefault();\n\n        var bounds = area.getBoundingClientRect(),\n            w = bounds.width,\n            h = bounds.height,\n            x = info.clientX,\n            y = info.clientY;\n\n        var relX = clamp(x - bounds.left, 0, w),\n            relY = clamp(y - bounds.top, 0, h);\n\n        callback(relX / w, relY / h);\n    }\n\n    function onMouse(e, starting) {\n        var button = e.buttons === undefined ? e.which : e.buttons;\n        if (button === 1) {\n            onMove(e, e, starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    function onTouch(e, starting) {\n        if (e.touches.length === 1) {\n            onMove(e, e.touches[0], starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    eventBucket.add(area, 'mousedown', function (e) {\n        onMouse(e, true);\n    });\n    eventBucket.add(area, 'touchstart', function (e) {\n        onTouch(e, true);\n    });\n    eventBucket.add(window, 'mousemove', onMouse);\n    eventBucket.add(area, 'touchmove', onTouch);\n    eventBucket.add(window, 'mouseup', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchend', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchcancel', function (e) {\n        dragging = false;\n    });\n}\n\nvar BG_TRANSP = 'url(\"data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'2\\' height=\\'2\\'%3E%3Cpath d=\\'M1,0H0V1H2V2H1\\' fill=\\'lightgrey\\'/%3E%3C/svg%3E\")';\nvar HUES = 360;\n\nvar EVENT_KEY = 'keydown',\n    EVENT_CLICK_OUTSIDE = 'mousedown',\n    EVENT_TAB_MOVE = 'focusin';\n\nfunction $(selector, context) {\n    return (context || document).querySelector(selector);\n}\n\nfunction stopEvent(e) {\n\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction onKey(bucket, target, keys, handler, stop) {\n    bucket.add(target, EVENT_KEY, function (e) {\n        if (keys.indexOf(e.key) >= 0) {\n            if (stop) {\n                stopEvent(e);\n            }\n            handler(e);\n        }\n    });\n}\n\nvar _style = document.createElement('style');\n_style.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\\'\\';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:\\'\\';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'2\\' height=\\'2\\'%3E%3Cpath d=\\'M1,0H0V1H2V2H1\\' fill=\\'lightgrey\\'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:\\'\\';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';\ndocument.documentElement.firstElementChild.appendChild(_style);\n\nvar Picker = function () {\n    function Picker(options) {\n        classCallCheck(this, Picker);\n\n\n        this.settings = {\n\n            popup: 'right',\n            layout: 'default',\n            alpha: true,\n            editor: true,\n            editorFormat: 'hex',\n            cancelButton: false\n        };\n\n        this._events = new EventBucket();\n\n        this.onChange = null;\n\n        this.onDone = null;\n\n        this.onOpen = null;\n\n        this.onClose = null;\n\n        this.setOptions(options);\n    }\n\n    createClass(Picker, [{\n        key: 'setOptions',\n        value: function setOptions(options) {\n            var _this = this;\n\n            if (!options) {\n                return;\n            }\n            var settings = this.settings;\n\n            function transfer(source, target, skipKeys) {\n                for (var key in source) {\n                    if (skipKeys && skipKeys.indexOf(key) >= 0) {\n                        continue;\n                    }\n\n                    target[key] = source[key];\n                }\n            }\n\n            if (options instanceof HTMLElement) {\n                settings.parent = options;\n            } else {\n\n                if (settings.parent && options.parent && settings.parent !== options.parent) {\n                    this._events.remove(settings.parent);\n                    this._popupInited = false;\n                }\n\n                transfer(options, settings);\n\n                if (options.onChange) {\n                    this.onChange = options.onChange;\n                }\n                if (options.onDone) {\n                    this.onDone = options.onDone;\n                }\n                if (options.onOpen) {\n                    this.onOpen = options.onOpen;\n                }\n                if (options.onClose) {\n                    this.onClose = options.onClose;\n                }\n\n                var col = options.color || options.colour;\n                if (col) {\n                    this._setColor(col);\n                }\n            }\n\n            var parent = settings.parent;\n            if (parent && settings.popup && !this._popupInited) {\n\n                var openProxy = function openProxy(e) {\n                    return _this.openHandler(e);\n                };\n\n                this._events.add(parent, 'click', openProxy);\n\n                onKey(this._events, parent, [' ', 'Spacebar', 'Enter'], openProxy);\n\n                this._popupInited = true;\n            } else if (options.parent && !settings.popup) {\n                this.show();\n            }\n        }\n    }, {\n        key: 'openHandler',\n        value: function openHandler(e) {\n            if (this.show()) {\n\n                e && e.preventDefault();\n\n                this.settings.parent.style.pointerEvents = 'none';\n\n                var toFocus = e && e.type === EVENT_KEY ? this._domEdit : this.domElement;\n                setTimeout(function () {\n                    return toFocus.focus();\n                }, 100);\n\n                if (this.onOpen) {\n                    this.onOpen(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'closeHandler',\n        value: function closeHandler(e) {\n            var event = e && e.type;\n            var doHide = false;\n\n            if (!e) {\n                doHide = true;\n            } else if (event === EVENT_CLICK_OUTSIDE || event === EVENT_TAB_MOVE) {\n\n                var knownTime = (this.__containedEvent || 0) + 100;\n                if (e.timeStamp > knownTime) {\n                    doHide = true;\n                }\n            } else {\n\n                stopEvent(e);\n\n                doHide = true;\n            }\n\n            if (doHide && this.hide()) {\n                this.settings.parent.style.pointerEvents = '';\n\n                if (event !== EVENT_CLICK_OUTSIDE) {\n                    this.settings.parent.focus();\n                }\n\n                if (this.onClose) {\n                    this.onClose(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'movePopup',\n        value: function movePopup(options, open) {\n\n            this.closeHandler();\n\n            this.setOptions(options);\n            if (open) {\n                this.openHandler();\n            }\n        }\n    }, {\n        key: 'setColor',\n        value: function setColor(color, silent) {\n            this._setColor(color, { silent: silent });\n        }\n    }, {\n        key: '_setColor',\n        value: function _setColor(color, flags) {\n            if (typeof color === 'string') {\n                color = color.trim();\n            }\n            if (!color) {\n                return;\n            }\n\n            flags = flags || {};\n            var c = void 0;\n            try {\n\n                c = new Color(color);\n            } catch (ex) {\n                if (flags.failSilently) {\n                    return;\n                }\n                throw ex;\n            }\n\n            if (!this.settings.alpha) {\n                var hsla = c.hsla;\n                hsla[3] = 1;\n                c.hsla = hsla;\n            }\n            this.colour = this.color = c;\n            this._setHSLA(null, null, null, null, flags);\n        }\n    }, {\n        key: 'setColour',\n        value: function setColour(colour, silent) {\n            this.setColor(colour, silent);\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            var parent = this.settings.parent;\n            if (!parent) {\n                return false;\n            }\n\n            if (this.domElement) {\n                var toggled = this._toggleDOM(true);\n\n                this._setPosition();\n\n                return toggled;\n            }\n\n            var html = this.settings.template || '<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div><div class=\"picker_cancel\"><button>Cancel</button></div></div>';\n            var wrapper = parseHTML(html);\n\n            this.domElement = wrapper;\n            this._domH = $('.picker_hue', wrapper);\n            this._domSL = $('.picker_sl', wrapper);\n            this._domA = $('.picker_alpha', wrapper);\n            this._domEdit = $('.picker_editor input', wrapper);\n            this._domSample = $('.picker_sample', wrapper);\n            this._domOkay = $('.picker_done button', wrapper);\n            this._domCancel = $('.picker_cancel button', wrapper);\n\n            wrapper.classList.add('layout_' + this.settings.layout);\n            if (!this.settings.alpha) {\n                wrapper.classList.add('no_alpha');\n            }\n            if (!this.settings.editor) {\n                wrapper.classList.add('no_editor');\n            }\n            if (!this.settings.cancelButton) {\n                wrapper.classList.add('no_cancel');\n            }\n            this._ifPopup(function () {\n                return wrapper.classList.add('popup');\n            });\n\n            this._setPosition();\n\n            if (this.colour) {\n                this._updateUI();\n            } else {\n                this._setColor('#0cf');\n            }\n            this._bindEvents();\n\n            return true;\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            return this._toggleDOM(false);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.destroy();\n            if (this.domElement) {\n                this.settings.parent.removeChild(this.domElement);\n            }\n        }\n    }, {\n        key: '_bindEvents',\n        value: function _bindEvents() {\n            var _this2 = this;\n\n            var that = this,\n                dom = this.domElement,\n                events = this._events;\n\n            function addEvent(target, type, handler) {\n                events.add(target, type, handler);\n            }\n\n            addEvent(dom, 'click', function (e) {\n                return e.preventDefault();\n            });\n\n            dragTrack(events, this._domH, function (x, y) {\n                return that._setHSLA(x);\n            });\n\n            dragTrack(events, this._domSL, function (x, y) {\n                return that._setHSLA(null, x, 1 - y);\n            });\n\n            if (this.settings.alpha) {\n                dragTrack(events, this._domA, function (x, y) {\n                    return that._setHSLA(null, null, null, 1 - y);\n                });\n            }\n\n            var editInput = this._domEdit;\n            {\n                addEvent(editInput, 'input', function (e) {\n                    that._setColor(this.value, { fromEditor: true, failSilently: true });\n                });\n\n                addEvent(editInput, 'focus', function (e) {\n                    var input = this;\n\n                    if (input.selectionStart === input.selectionEnd) {\n                        input.select();\n                    }\n                });\n            }\n\n            this._ifPopup(function () {\n\n                var popupCloseProxy = function popupCloseProxy(e) {\n                    return _this2.closeHandler(e);\n                };\n\n                addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\n                addEvent(window, EVENT_TAB_MOVE, popupCloseProxy);\n                onKey(events, dom, ['Esc', 'Escape'], popupCloseProxy);\n\n                var timeKeeper = function timeKeeper(e) {\n                    _this2.__containedEvent = e.timeStamp;\n                };\n                addEvent(dom, EVENT_CLICK_OUTSIDE, timeKeeper);\n\n                addEvent(dom, EVENT_TAB_MOVE, timeKeeper);\n\n                addEvent(_this2._domCancel, 'click', popupCloseProxy);\n            });\n\n            var onDoneProxy = function onDoneProxy(e) {\n                _this2._ifPopup(function () {\n                    return _this2.closeHandler(e);\n                });\n                if (_this2.onDone) {\n                    _this2.onDone(_this2.colour);\n                }\n            };\n            addEvent(this._domOkay, 'click', onDoneProxy);\n            onKey(events, dom, ['Enter'], onDoneProxy);\n        }\n    }, {\n        key: '_setPosition',\n        value: function _setPosition() {\n            var parent = this.settings.parent,\n                elm = this.domElement;\n\n            if (parent !== elm.parentNode) {\n                parent.appendChild(elm);\n            }\n\n            this._ifPopup(function (popup) {\n\n                if (getComputedStyle(parent).position === 'static') {\n                    parent.style.position = 'relative';\n                }\n\n                var cssClass = popup === true ? 'popup_right' : 'popup_' + popup;\n\n                ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(function (c) {\n\n                    if (c === cssClass) {\n                        elm.classList.add(c);\n                    } else {\n                        elm.classList.remove(c);\n                    }\n                });\n\n                elm.classList.add(cssClass);\n            });\n        }\n    }, {\n        key: '_setHSLA',\n        value: function _setHSLA(h, s, l, a, flags) {\n            flags = flags || {};\n\n            var col = this.colour,\n                hsla = col.hsla;\n\n            [h, s, l, a].forEach(function (x, i) {\n                if (x || x === 0) {\n                    hsla[i] = x;\n                }\n            });\n            col.hsla = hsla;\n\n            this._updateUI(flags);\n\n            if (this.onChange && !flags.silent) {\n                this.onChange(col);\n            }\n        }\n    }, {\n        key: '_updateUI',\n        value: function _updateUI(flags) {\n            if (!this.domElement) {\n                return;\n            }\n            flags = flags || {};\n\n            var col = this.colour,\n                hsl = col.hsla,\n                cssHue = 'hsl(' + hsl[0] * HUES + ', 100%, 50%)',\n                cssHSL = col.hslString,\n                cssHSLA = col.hslaString;\n\n            var uiH = this._domH,\n                uiSL = this._domSL,\n                uiA = this._domA,\n                thumbH = $('.picker_selector', uiH),\n                thumbSL = $('.picker_selector', uiSL),\n                thumbA = $('.picker_selector', uiA);\n\n            function posX(parent, child, relX) {\n                child.style.left = relX * 100 + '%';\n            }\n            function posY(parent, child, relY) {\n                child.style.top = relY * 100 + '%';\n            }\n\n            posX(uiH, thumbH, hsl[0]);\n\n            this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\n\n            posX(uiSL, thumbSL, hsl[1]);\n            posY(uiSL, thumbSL, 1 - hsl[2]);\n\n            uiSL.style.color = cssHSL;\n\n            posY(uiA, thumbA, 1 - hsl[3]);\n\n            var opaque = cssHSL,\n                transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\n                bg = 'linear-gradient(' + [opaque, transp] + ')';\n\n            this._domA.style.backgroundImage = bg + ', ' + BG_TRANSP;\n\n            if (!flags.fromEditor) {\n                var format = this.settings.editorFormat,\n                    alpha = this.settings.alpha;\n\n                var value = void 0;\n                switch (format) {\n                    case 'rgb':\n                        value = col.printRGB(alpha);break;\n                    case 'hsl':\n                        value = col.printHSL(alpha);break;\n                    default:\n                        value = col.printHex(alpha);\n                }\n                this._domEdit.value = value;\n            }\n\n            this._domSample.style.color = cssHSLA;\n        }\n    }, {\n        key: '_ifPopup',\n        value: function _ifPopup(actionIf, actionElse) {\n            if (this.settings.parent && this.settings.popup) {\n                actionIf && actionIf(this.settings.popup);\n            } else {\n                actionElse && actionElse();\n            }\n        }\n    }, {\n        key: '_toggleDOM',\n        value: function _toggleDOM(toVisible) {\n            var dom = this.domElement;\n            if (!dom) {\n                return false;\n            }\n\n            var displayStyle = toVisible ? '' : 'none',\n                toggle = dom.style.display !== displayStyle;\n\n            if (toggle) {\n                dom.style.display = displayStyle;\n            }\n            return toggle;\n        }\n    }], [{\n        key: 'StyleElement',\n        get: function get$$1() {\n            return _style;\n        }\n    }]);\n    return Picker;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Picker);\n\n\n//# sourceURL=webpack:///./node_modules/vanilla-picker/dist/vanilla-picker.mjs?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ })

/******/ });